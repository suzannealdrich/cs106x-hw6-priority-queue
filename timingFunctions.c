/* * File: timeTrials.c * ------------------ * Implementation for the the time trial modules.  These * functions allow you to test a queueADT implementation in * a timed manner to evaluate its performance. */ #include "pqueue.h"#include "testingFunctions.h"#include "timingFunctions.h"#include "genlib.h"#include "random.h"#include "simpio.h"static void RunInsertTrial(int size);static void RunSortTrial(int size);/* * Function: RunTimeTrial * ---------------------- * Runs a time trial using queues of specified size.  The time trial reports * the amount of time necessary to insert that many entries into a queue, to * extract the max element from a queue of that size.  All results are reported  * in ticks (which are 1/60 of a second) */void RunTimeTrial(int size){	printf("\n ---------- Time trial for %d element queue -----------\n\n", size);	RunInsertTrial(size);	RunSortTrial( size);	printf("\nReady to go on? ");	GetLine();}/* * Function: RunInsertTrial * ----------------------- * Runs the insert, extract, search & delete time trials for the specified * queue size.  Reports results to stdout. * Note that we just randomly choose numbers to insert, in the range 1 to * size of the queue.  Search and Delete randomly choose a number to pursue, * so sometimes it will find it and other times not. */static void RunInsertTrial( int size){	pqueueADT queue;	long start;	int i;		queue = NewPriorityQueue();		start = TickCount();	for (i = 0; i < size; i++)		Insert(queue, RandomInteger(1,size));	printf("time to insert %d elements into queue: %ld\n", size, TickCount() - start);	start = TickCount();	for (i = 0; i < size; i++)		ExtractMax(queue);	printf("time to extract %d elements: %ld\n", size, TickCount() - start);	for (i = 0; i < size; i++)		Insert(queue, RandomInteger(1,size));	// set up queue of correct size	start = TickCount();	for (i = 0; i < size; i++)		Search(queue, RandomInteger(1, size));	// randomly choose something to look up	printf("average time to search a queue of %d elements: %g\n", size,         ((double) TickCount() - start) / size);	//printf("time to search for %d elements: %ld\n", size, TickCount() - start);	start = TickCount();	for (i = 0; i < size; i++)		Delete(queue, RandomInteger(1, size));		printf("time to delete %d elements: %ld\n", size, TickCount() - start);	FreeQueue(queue);}/* * Function: RunSortTrial * ---------------------- * Runs the sorting time trial for the specified queue size. * Reports results to stdout. */static void RunSortTrial(int size){	long start;	int *array, i;	pqueueADT queue;		queue = NewPriorityQueue();	array = (int *)GetBlock(sizeof(int)*size);		for (i = 0; i < size; i++)		// put random data into array		array[i] = RandomInteger(1, size);	start = TickCount();	Heapsort(queue,array, size);	printf("time to heapsort array of size %d: %ld\n", size,  TickCount() - start);		for (i = 0; i < size; i++)		// put data in array already sorted 		array[i] = i;	start = TickCount();	Heapsort(queue,array, size);	printf("time to heapsort (already sorted) array of size %d: %ld\n", size,  TickCount() - start);		for (i = 0; i < size; i++)		// put data in array already reverse sorted 		array[i] = size -i;	start = TickCount();	Heapsort(queue,array, size);	printf("time to heapsort (reverse sorted) array of size %d: %ld\n", size,  TickCount() - start);	FreeBlock(array);	FreeQueue(queue);}